WHAT: all, -dance, -go_to_the_bathroom
WHERE: nightclub
WHEN: 0 - 24
WHO: none
OTHER: Random(0, 500) < attractiveness + interpersonal && [!isWithCompanion() || !CurrentCompanion.isRelative()]

SceneStart()
Actor = getCompanion()
    If !Actor.isValid()
        Random
            Actor = getPerson()
            Actor = generatePerson()
        EndRandom
        Actor.dress()
    Endif
    If !Actor.isValid()
        Actor = generatePerson()
        Actor.dress()
    Endif    
Actor.show(2)
    If Actor.isDominantSex(Player) && Random(0, 70) < Actor:interpersonal
        "<Actor.name> m'invite sur la piste de danse. Devrais-je y aller?"
        0:: "Oui"
        1:: "Non"
        
        If 0
            DanceAccepted = true
        Else
            DanceAccepted = false
            "J'ai décidé de refuser l'offre de <Actor.name>."
        Endif
    Else
        If !isWithCompanion()
            "Je remarque <Actor.name> boire <Actor.seul_or_seule> au bar."
        Endif
        "Dois-je inviter <Actor.name> à danser avec moi?"
        0:: "Oui"
        1:: "Non"
        
        If 0
            Player(Happy):: "Salut, aimerait-tu venir danser avec moi sur la piste de danse?"
            If Actor:attractiontoplayer > Random(0, 20) || Actor:rapportwithplayer > Random(0, 20) || Random(0, 200) < interpersonal
                Actor(Happy):: "Of course, I'd love to!"
                DanceAccepted = true
            Else
                Actor(Sad):: "Désolé, je n'aime pas trop danser, je suis venu ici pour boire et cruiser, mais pas pour danser ..."
                DanceAccepted = false
            Endif
        Else
            "J'ai décidé de ne pas demander à <Actor.him_or_her> à danser."
            DanceAccepted = false
        Endif
    Endif

    If DanceAccepted
        Actor.show(5)
        "Nous nous dirigeons vers la piste de danse et avons commencé à danser ensemble."
        If Actor.isInterestedIn(Player)
            Actor:attractiontoplayer += dance*Random(0, 0.05)
        Else
            Actor:rapportwithplayer += dance*Random(0, 0.05)
        Endif
        
        "Dois-je faire un move, montrer mon intérêt?"
        0:: "Juste dancer"
        1:: "Embrasser <Actor.name>"
        
        If 1
            If Actor:attractiontoplayer > Random(0, 30) || Random(30, 100) < Actor:perversion
                "<Actor.name> m'a embrassé en retour et nous nous sommes rapidement laissés aller, en nous embrassant passionnément, juste là au milieu de la piste de danse. Nos mains étaient partout et l'ambience devenait vraiment très chaude!"
                Kissed = true
            Else
                "<Actor.name> s'éloigne aussitôt la tête pour éviter mon baiser. Embarrassé, je n'avais pas d'autre choix que de continuer à danser comme si rien ne s'était passer."
                Kissed = false
            Endif
        Else
            If Random(40, 200) < Actor:attractiontoplayer + Actor:perversion || [Actor.isDominantSex(Player) && Random(0, 70) < Actor:attractiontoplayer]
                "Tout à coup, <Actor.name> s'approche la bouche de ma bouche pour m'embrasser."
                0:: "L'embrasser"
                1:: "Rejeter son baiser"
                
                If 0
                    "Je l'ai embrassé en retour et nous nous sommes rapidement laissés aller, en nous embrassant passionnément, juste là au milieu de la piste de danse. Nos mains étaient partout et l'ambience devenait vraiment très chaude!"
                    Kissed = true
                Else
                    "J'ai aussitôt ma tête pour éviter le baiser de <Actor.name>. Embarrassé, <Actor.il_or_elle> n'avait pas d'autre choix que de continuer à danser comme si rien ne s'était passer."
                    Kissed = false
                Endif
            Else
                Kissed = false
            Endif           
        Endif
        
        If Kissed
            "Dois-je essayer d'aller plus loin?"
            0:: "Non, on arrête-ça là"
            1:: perversion > 40:: "L'inviter dans les toilettes"
            2:: "L'inviter à la maison"
            
            If !Actor.isDominantSex(Player) && Actor:attractiontoplayer + Actor:perversion < Random(50, 200)
                choice = 0
                "J'ai donc chuchoté à l'oreille de <Actor.name>, suggérant que nous devrions peut-être trouver un endroit plus intime, mais <Actor.il_or_elle> a chuchoté en retour, disant que ce n'était pas une bonne idée."
            Endif
        Else
            choice = 0
        Endif
        
        If 0
            "Nous avons terminé le reste de la danse sans rien en retour."
            If !isWithCompanion()
                "Dois-je continuer la soirée avec <Actor.name>?"
                0:: "Oui"
                1:: "Non, c'était juste pour une danse"
                
                If 0
                    Actor.startDate()
                Endif
            Endif
        Else
            If 1
                "J'ai rapidement conduit <Actor.name> par la main vers les toilettes de la boîte de nuit. Nous sommes rapidement entrés dans l'une des cabines et avons recommencé à nous embrasser comme des déchainés."
            Else
                "Nous avons rapidement quitté la boîte de nuit et sommes allés directement chez moi. Une fois rendu dans ma chambre, <Actor.name> m'a pratiquement sauté dessus."
                moveTo(Home)
            Endif
            Sex(Player, Actor)
            Actor:attractiontoplayer += Random(0, 5)
            perversion += Random(0, 0.5)
            Actor.show(2)
            If !Actor.isContactExchanged()
                perversion += Random(0, 0.5)
                "Je suis tellement horny - Assez, que je viens juste de coucher avec quelqu'un dont je ne connaissais pas avant aujourd'hui! Devrais-je au moins lui demander son numéro de téléphone?"
                0:: "Oui"
                1:: "Non"
                
                If 0
                    "Nous avons échangé nos numéros. Peut-être que cela pourra devenir plus sérieux plus tard."
                    exchangeContact(Actor)
                Else
                    "Non pas besoin. Je ne veux pas que <Actor.name> me rappel, ce n'était qu'une aventure d'un soir."
                Endif
            Endif
        Endif
    Elseif isWithCompanion()
        timeout(2, invite_to_dance)
    Endif    
SceneEnd()